(this["webpackJsonpmedication-dose-plotter"]=this["webpackJsonpmedication-dose-plotter"]||[]).push([[0],{27:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(3),l=n.n(r),a=n(2),o=n(9),c=n(10),u=(n(5),n(1));function i(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),r=Object(a.b)(),l=function(){var s,l,a,o;r({type:"set",property:e.set,value:{value:null!==(s=null===(l=t.current)||void 0===l?void 0:l.valueAsNumber)&&void 0!==s?s:NaN,units:null!==(a=null===(o=n.current)||void 0===o?void 0:o.value)&&void 0!==a?a:""}})};return Object(u.jsxs)("div",{id:e.id,children:[Object(u.jsx)("input",{onChange:l,type:"number",ref:t}),Object(u.jsxs)("select",{onChange:l,defaultValue:e.selected,ref:n,children:[Object(u.jsx)("option",{value:"hours",children:"hours"}),Object(u.jsx)("option",{value:"days",children:"days"}),Object(u.jsx)("option",{value:"weeks",children:"weeks"})]})]})}function d(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),r=Object(a.b)(),l=function(){var s,l,a,o;r({type:"set",property:e.set,value:{value:null!==(s=null===(l=t.current)||void 0===l?void 0:l.valueAsNumber)&&void 0!==s?s:NaN,doseType:null!==(a=null===(o=n.current)||void 0===o?void 0:o.value)&&void 0!==a?a:""}})};return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{onChange:l,id:e.id,type:"number",ref:t}),Object(u.jsxs)("select",{onChange:l,defaultValue:e.selected,ref:n,children:[Object(u.jsx)("option",{value:"per_dose",children:"per dose"}),Object(u.jsx)("option",{value:"per_hour",children:"per hour"}),Object(u.jsx)("option",{value:"per_day",children:"per day"}),Object(u.jsx)("option",{value:"per_week",children:"per week"})]})]})}function j(e,t){switch(t){case"hours":return 60*e*60;case"days":return 24*e*60*60;case"weeks":return 7*e*24*60*60}return NaN}var v=n(11),h=n.n(v);function b(){var e=Object(s.useRef)(null),t=Object(a.c)((function(e){return e})),n=Object(a.b)();return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:"Medication Dose Plotter"}),Object(u.jsx)("label",{htmlFor:"tEnd",children:"Time to plot"}),Object(u.jsx)(i,{id:"tEnd",set:"tEnd",selected:"weeks"}),Object(u.jsx)("label",{htmlFor:"tDose",children:"Time to dose"}),Object(u.jsx)(i,{id:"tDose",set:"tDose",selected:"weeks"}),Object(u.jsx)("label",{htmlFor:"interval",children:"Time between doses"}),Object(u.jsx)(i,{id:"interval",set:"interval",selected:"days"}),Object(u.jsx)("label",{htmlFor:"dose",children:"Dose (any units)"}),Object(u.jsx)(d,{id:"dose",set:"dose",selected:"per_dose"}),Object(u.jsx)("label",{htmlFor:"tHalf",children:"Half-life"}),Object(u.jsx)(i,{id:"tHalf",set:"tHalf",selected:"days"}),Object(u.jsx)("label",{htmlFor:"tMax",children:"Time to maximum concentration"}),Object(u.jsx)(i,{id:"tMax",set:"tMax",selected:"days"}),Object(u.jsx)("button",{onClick:function(){var s,r;console.log(t);var l=j(t.tEnd.value,t.tEnd.units),a=j(t.tDose.value,t.tDose.units),u=j(t.interval.value,t.interval.units),i=function(e,t,n){switch(n){case"per_dose":return e;case"per_hour":return e*(t/j(1,"hours"));case"per_day":return e*(t/j(1,"days"));case"per_week":return e*(t/j(1,"weeks"))}return NaN}(t.dose.value,u,t.dose.doseType),d=j(t.tHalf.value,t.tHalf.units),v=j(t.tMax.value,t.tMax.units),h=function(e){return Math.log(2)/e}(d),b=function(e,t,n,s,r,l){var a;do{(n-=(a=e(n))/t(n))<s?n=s:n>r&&(n=r)}while(Math.abs(a)>l);return n}((function(e){return function(e,t){return e!==t?Math.log(e/t)/(e-t):1/e}(e,h)-v}),(function(e){return function(e,t){return e!==t?(e*-Math.log(e/t)+e-t)/(e*Math.pow(e-t,2)):-1/(2*Math.pow(e,2))}(e,h)}),1,Number.EPSILON,Number.MAX_VALUE,1e-4*v);console.log("Ke: ".concat(h)),console.log("Ka: ".concat(b));for(var p=function(){function e(t){Object(o.a)(this,e),this.offset=void 0,this.offset=t}return Object(c.a)(e,[{key:"f",value:function(e,t,n,s,r,l){return e-=this.offset,r*s*t/(l*(t-n))*(Math.exp(-n*e)-Math.exp(-t*e))}}]),e}(),f={x:new Array,y:new Array,mode:"lines"},O=l/1e4,x=[],y=function(e,t){switch(t){case"hours":return e/3600;case"days":return e/86400;case"weeks":return e/604800}return NaN}(1,null!==(s=null===(r=e.current)||void 0===r?void 0:r.value)&&void 0!==s?s:""),m=0,w=0;w<l;m++){(w=O*m)>=u*x.length&&w<a&&x.push(new p(w));for(var N=0,g=0;g<x.length;g++)N+=x[g].f(w,b,h,i,1,1);f.x.push(w*y),f.y.push(N)}n({type:"set",property:"data",value:f}),n({type:"set",property:"message",value:isNaN(i)?"":"Dosing ".concat(i.toPrecision(4)," every ").concat(t.interval.value," ").concat(t.interval.units)})},children:"Plot"}),Object(u.jsxs)("select",{defaultValue:"days",ref:e,children:[Object(u.jsx)("option",{value:"hours",children:"Hours"}),Object(u.jsx)("option",{value:"days",children:"Days"}),Object(u.jsx)("option",{value:"weeks",children:"Weeks"})]}),Object(u.jsx)("p",{children:t.message}),Object(u.jsx)(h.a,{style:{width:"100%",height:"100%"},useResizeHandler:!0,data:[t.data],layout:{autosize:!0}})]})}var p=n(13),f=n(12),O={value:NaN,units:""},x={tEnd:O,tDose:O,interval:O,tHalf:O,tMax:O,dose:{value:NaN,doseType:""},data:{x:new Array,y:new Array},message:""};var y=Object(f.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;console.log(t);var n=Object(p.a)({},e);return"set"===t.type&&(n[t.property]=t.value),n})),m=y,w=document.getElementById("root");l.a.render(Object(u.jsx)(s.StrictMode,{children:Object(u.jsx)(a.a,{store:m,children:Object(u.jsx)(b,{})})}),w)},5:function(e,t,n){}},[[27,1,2]]]);
//# sourceMappingURL=main.07567f8c.chunk.js.map